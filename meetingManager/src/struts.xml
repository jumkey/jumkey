<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<!-- 用URL扩展名来确定是否这个请求是被用作Struts action -->
	<constant name="struts.action.extension" value="action" />
	<!-- <constant name="struts.action.excludePattern" value="/dwr/.*,/dwr/test/.*" /> -->
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<constant name="struts.devMode" value="true" />
	
	<package name="login" namespace="/admin" extends="struts-default">
		<action name="sys_*" method="{1}" class="loginAction">
			<!-- <exception-mapping result="exceptionResult" exception="java.lang.RuntimeException"></exception-mapping> -->
			<result name="success" type="redirect">/main/main.action</result>
			<result name="login" type="redirect" >/index.jsp</result>
		</action>
	</package>
	<package name="struts2" namespace="/main" extends="struts-default">
		<!-- 用户拦截器定义在该元素下 -->
		<interceptors>
			<!-- 定义了一个名为authority的拦截器 -->
			<interceptor name="authority" class="com.onegrid.meetmanager.web.action.interceptor.AuthorityInterceptor" />
			<!-- 定义一个包含权限检查的拦截器栈 -->
			<interceptor-stack name="mydefault">
				<!-- 定义拦截器栈包含default-stack拦截器栈 -->
				<interceptor-ref name="defaultStack" />
				<!-- 定义拦截器栈包含authority拦截器 -->
				<interceptor-ref name="authority" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="mydefault" />
		<global-results>
			<result name="exceptionResult">/exception.jsp</result>
			<result name="globalException">/exception.jsp</result>
			<result name="login">/index.jsp</result>
		</global-results>
		<action name="main" class="mainAction">
			<result name="success">/main.jsp</result>
		</action>
		<action name="pinfo_*" method="{1}" class="accountAction">
			<result name="editpage">/system/editpinfo.jsp</result>
			<result name="listaccount">/system/listaccount.jsp</result>
		</action>
		<action name="*">
			<result type="velocity">/{1}.vm</result>
		</action>
	</package>
</struts>
